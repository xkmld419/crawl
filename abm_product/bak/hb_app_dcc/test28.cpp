#include "TAvpParser.h"
#undef DEBUG_TAVPPARSER

#include <string>
#include <iostream>
using namespace std;
#include <string.h>

int main()
{
	char dccStr[1000] = {0};
	TAvpParser avpParser;
	TAvpHead avpHead;
	TAVPObject avpObj;
	string avpLog;
	unsigned int iAvpLen;
/*
	unsigned char dccBuf[20000] = {0x01,0x00,0x03,0x60,0x40,0x00,0x01,0x10,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x01,0x07,0x40,0x00,0x00,0x2c,0x48,0x42,0x40,0x30,0x32,0x35,0x2e,0x43,0x68,0x69,0x6e,0x61,0x54,0x65,0x6c,0x65,0x63,0x6f,0x6d,0x2e,0x63,0x6f,0x6d,0x3b,0x31,0x32,0x38,0x37,0x36,0x33,0x39,0x30,0x31,0x37,0x3b,0x31,0x00,0x00,0x01,0x0c,0x40,0x00,0x00,0x0c,0x00,0x00,0x07,0xd1,0x00,0x00,0x01,0x08,0x40,0x00,0x00,0x1f,0x48,0x42,0x40,0x30,0x32,0x35,0x2e,0x43,0x68,0x69,0x6e,0x61,0x54,0x65,0x6c,0x65,0x63,0x6f,0x6d,0x2e,0x63,0x6f,0x6d,0x00,0x00,0x00,0x01,0x28,0x40,0x00,0x00,0x1c,0x30,0x32,0x35,0x2e,0x43,0x68,0x69,0x6e,0x61,0x54,0x65,0x6c,0x65,0x63,0x6f,0x6d,0x2e,0x63,0x6f,0x6d,0x00,0x00,0x01,0x02,0x40,0x00,0x00,0x0c,0x00,0x00,0x00,0x04,0x00,0x00,0x01,0xa0,0x40,0x00,0x00,0x0c,0x00,0x00,0x00,0x04,0x00,0x00,0x01,0x9f,0x40,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x69,0xc0,0x00,0x02,0xb4,0x00,0x00,0x28,0xaf,0x00,0x00,0x50,0x97,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x03,0x00,0x01,0x3d,0x11,0xc0,0x00,0x01,0x4c,0x00,0x01,0x3c,0x68,0x00,0x01,0x3d,0x0e,0xc0,0x00,0x00,0x16,0x00,0x01,0x3c,0x68,0x31,0x30,0x30,0x30,0x30,0x30,0x36,0x32,0x38,0x34,0x00,0x00,0x00,0x01,0x3c,0xed,0xc0,0x00,0x00,0x16,0x00,0x01,0x3c,0x68,0x31,0x30,0x30,0x39,0x35,0x36,0x33,0x31,0x36,0x38,0x00,0x00,0x00,0x01,0x38,0xfd,0xc0,0x00,0x00,0x17,0x00,0x01,0x3c,0x68,0x30,0x32,0x30,0x38,0x37,0x39,0x33,0x39,0x33,0x30,0x38,0x00,0x00,0x01,0x3c,0xf8,0xc0,0x00,0x00,0x12,0x00,0x01,0x3c,0x68,0x31,0x31,0x30,0x31,0x30,0x30,0x00,0x00,0x00,0x01,0x3c,0xd1,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x20,0x00,0x01,0x3c,0xd2,0xc0,0x00,0x00,0x0f,0x00,0x01,0x3c,0x68,0x30,0x32,0x35,0x00,0x00,0x01,0x3c,0xd3,0xc0,0x00,0x00,0x0e,0x00,0x01,0x3c,0x68,0x33,0x32,0x00,0x00,0x00,0x01,0x3c,0xd4,0xc0,0x00,0x00,0x0f,0x00,0x01,0x3c,0x68,0x30,0x32,0x30,0x00,0x00,0x01,0x3d,0x12,0xc0,0x00,0x00,0xa4,0x00,0x01,0x3c,0x68,0x00,0x01,0x3d,0x15,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x31,0x31,0x30,0x33,0x00,0x01,0x3d,0x15,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x31,0x31,0x30,0x33,0x00,0x01,0x3d,0x13,0xc0,0x00,0x00,0x14,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x2b,0x00,0x01,0x3d,0x13,0xc0,0x00,0x00,0x14,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1a,0x00,0x01,0x3d,0x14,0xc0,0x00,0x00,0x14,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x32,0x00,0x01,0x3d,0x14,0xc0,0x00,0x00,0x14,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1e,0x00,0x00,0x13,0xb3,0xc0,0x00,0x00,0x12,0x00,0x01,0x3c,0x68,0x32,0x30,0x31,0x30,0x31,0x30,0x00,0x00,0x00,0x00,0x13,0xb3,0xc0,0x00,0x00,0x12,0x00,0x01,0x3c,0x68,0x32,0x30,0x31,0x30,0x31,0x30,0x00,0x00,0x00,0x01,0x3d,0x11,0xc0,0x00,0x01,0x4c,0x00,0x01,0x3c,0x68,0x00,0x01,0x3d,0x0e,0xc0,0x00,0x00,0x16,0x00,0x01,0x3c,0x68,0x31,0x30,0x30,0x30,0x30,0x30,0x36,0x33,0x37,0x36,0x00,0x00,0x00,0x01,0x3c,0xed,0xc0,0x00,0x00,0x16,0x00,0x01,0x3c,0x68,0x31,0x30,0x30,0x39,0x33,0x37,0x36,0x38,0x35,0x38,0x00,0x00,0x00,0x01,0x38,0xfd,0xc0,0x00,0x00,0x17,0x00,0x01,0x3c,0x68,0x30,0x32,0x30,0x38,0x37,0x39,0x31,0x39,0x33,0x37,0x30,0x00,0x00,0x01,0x3c,0xf8,0xc0,0x00,0x00,0x12,0x00,0x01,0x3c,0x68,0x31,0x31,0x30,0x31,0x30,0x30,0x00,0x00,0x00,0x01,0x3c,0xd1,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x26,0x00,0x01,0x3c,0xd2,0xc0,0x00,0x00,0x0f,0x00,0x01,0x3c,0x68,0x30,0x32,0x31,0x00,0x00,0x01,0x3c,0xd3,0xc0,0x00,0x00,0x0e,0x00,0x01,0x3c,0x68,0x33,0x38,0x00,0x00,0x00,0x01,0x3c,0xd4,0xc0,0x00,0x00,0x0f,0x00,0x01,0x3c,0x68,0x30,0x32,0x31,0x00,0x00,0x01,0x3d,0x12,0xc0,0x00,0x00,0xa4,0x00,0x01,0x3c,0x68,0x00,0x01,0x3d,0x15,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x31,0x31,0x30,0x33,0x00,0x01,0x3d,0x15,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x31,0x31,0x30,0x33,0x00,0x01,0x3d,0x13,0xc0,0x00,0x00,0x14,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0b,0x00,0x01,0x3d,0x13,0xc0,0x00,0x00,0x14,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x00,0x01,0x3d,0x14,0xc0,0x00,0x00,0x14,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x32,0x00,0x01,0x3d,0x14,0xc0,0x00,0x00,0x14,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x14,0x00,0x00,0x13,0xb3,0xc0,0x00,0x00,0x12,0x00,0x01,0x3c,0x68,0x32,0x30,0x31,0x30,0x31,0x30,0x00,0x00,0x00,0x00,0x13,0xb3,0xc0,0x00,0x00,0x12,0x00,0x01,0x3c,0x68,0x32,0x30,0x31,0x30,0x31,0x30,0x00,0x00};
*/
unsigned char dccBuf[20000] ={0x01,0x00,0x01,0x5c,0xc0,0x00,0x01,0x10,0x00,0x00,0x00,0x04,0x00,0x32,0xd9,0x97,0x00,0x32,0xd9,0x97,0x00,0x00,0x01,0x07,0x40,0x00,0x00,0x32,0x48,0x42,0x40,0x30,0x32,0x35,0x2e,0x43,0x68,0x69,0x6e,0x61,0x54,0x65,0x6c,0x65,0x63,0x6f,0x6d,0x2e,0x63,0x6f,0x6d,0x3b,0x31,0x32,0x38,0x37,0x35,0x35,0x39,0x38,0x34,0x38,0x3b,0x33,0x33,0x33,0x32,0x35,0x30,0x33,0x00,0x00,0x00,0x00,0x01,0x08,0x40,0x00,0x00,0x1f,0x48,0x42,0x40,0x30,0x32,0x35,0x2e,0x43,0x68,0x69,0x6e,0x61,0x54,0x65,0x6c,0x65,0x63,0x6f,0x6d,0x2e,0x63,0x6f,0x6d,0x00,0x00,0x00,0x01,0x28,0x40,0x00,0x00,0x1c,0x30,0x30,0x31,0x2e,0x43,0x68,0x69,0x6e,0x61,0x54,0x65,0x6c,0x65,0x63,0x6f,0x6d,0x2e,0x63,0x6f,0x6d,0x00,0x00,0x01,0x1b,0x40,0x00,0x00,0x1c,0x30,0x32,0x35,0x2e,0x43,0x68,0x69,0x6e,0x61,0x54,0x65,0x6c,0x65,0x63,0x6f,0x6d,0x2e,0x63,0x6f,0x6d,0x00,0x00,0x01,0x02,0x40,0x00,0x00,0x0c,0x00,0x00,0x00,0x04,0x00,0x00,0x01,0xcd,0x40,0x00,0x00,0x2e,0x42,0x69,0x6c,0x6c,0x51,0x75,0x65,0x72,0x79,0x2e,0x50,0x61,0x79,0x6d,0x65,0x6e,0x74,0x40,0x30,0x31,0x30,0x2e,0x63,0x68,0x69,0x6e,0x61,0x74,0x65,0x6c,0x65,0x63,0x6f,0x6d,0x2e,0x63,0x6f,0x6d,0x00,0x00,0x00,0x00,0x01,0xa0,0x40,0x00,0x00,0x0c,0x00,0x00,0x00,0x04,0x00,0x00,0x01,0x9f,0x40,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x69,0xc0,0x00,0x00,0x68,0x00,0x00,0x28,0xaf,0x00,0x01,0x38,0xe4,0xc0,0x00,0x00,0x5c,0x00,0x01,0x3c,0x68,0x00,0x01,0x39,0x26,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x01,0x00,0x00,0x50,0x80,0xc0,0x00,0x00,0x0e,0x00,0x01,0x3c,0x68,0x32,0x32,0x00,0x00,0x00,0x01,0x3a,0x1b,0xc0,0x00,0x00,0x0e,0x00,0x01,0x3c,0x68,0x30,0x32,0x00,0x00,0x00,0x01,0x38,0xe5,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x01,0x00,0x01,0x38,0xe6,0xc0,0x00,0x00,0x10,0x00,0x01,0x3c,0x68,0x00,0x00,0x00,0x00};
	avpParser.initDictionary("../../etc/dictionary.xml");

	avpParser.setCheckOption(1, 1);

    //avpParser.setServiceType("QueryHomeAreaByAccNbr.HSS");
	avpParser.ParseHead(dccBuf, 20, NULL);
	avpParser.ParseBody(dccBuf+20, 20000, &avpObj);

	int result = avpParser.IsValidMsg(&avpObj);

	cout << "isValidMsg : " << result << endl;

	avpObj.toCString(dccStr);
	cout << dccStr << endl;

	avpLog = avpParser.getDccLog();
	cout << avpLog << endl;

	return 0;
}

